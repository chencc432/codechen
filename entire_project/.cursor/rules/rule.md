---
description: "Golang后端开发教学项目规范 - 专为新手学习设计的代码标准和最佳实践指南"
alwaysApply: true
---

# Golang 后端开发教学规范

## 项目目标
本项目旨在通过实际代码开发，教授 Golang 后端开发的基础知识和最佳实践。所有代码都应该以教学为目的，注重可读性、可理解性和渐进式学习。

## 代码规范

### 1. 代码风格
- 严格遵循 Go 官方代码风格指南 (gofmt, golint)
- 使用有意义的变量名和函数名，优先选择英文，但可在注释中使用中文解释
- 包名使用小写字母，简洁明了
- 常量使用大驼峰命名法，变量使用小驼峰命名法

### 2. 注释要求
- **必须**为每个公开的函数、结构体、接口添加中文注释
- 注释格式：`// FunctionName 函数功能描述`
- 复杂逻辑必须添加行内注释说明
- 每个文件开头必须有包说明注释
- 对于教学代码，增加"学习要点"注释

### 3. 项目结构
```
project/
├── cmd/           # 主要应用程序入口
├── internal/      # 私有应用程序和库代码
├── pkg/           # 外部应用程序可以使用的库代码
├── api/           # API 相关定义
├── configs/       # 配置文件
├── scripts/       # 构建、安装、分析等脚本
├── test/          # 测试文件
├── docs/          # 设计和用户文档
└── examples/      # 示例代码
```

### 4. 错误处理
- 必须显式处理所有错误，不允许忽略
- 使用 `fmt.Errorf` 包装错误，提供上下文信息
- 为教学目的，错误信息要详细且易理解
- 示例：`return fmt.Errorf("连接数据库失败: %w", err)`

### 5. 数据库操作
- 使用 GORM 作为 ORM，但要先教授原生 SQL
- 必须使用事务处理复杂操作
- 所有查询都要有错误处理和日志记录
- 数据库迁移文件要有清晰的注释

### 6. API 设计
- 遵循 RESTful 设计原则
- 统一的响应格式：
```go
type Response struct {
    Code    int         `json:"code"`    // 状态码
    Message string      `json:"message"` // 消息
    Data    interface{} `json:"data"`    // 数据
}
```
- 必须进行输入验证
- 使用 gin 框架，但要解释每个中间件的作用

### 7. 测试要求
- 每个核心功能必须有单元测试
- 测试覆盖率要求达到 80% 以上
- 测试函数命名：`TestFunctionName_Scenario`
- 必须包含表格驱动测试的示例

### 8. 日志规范
- 使用结构化日志 (如 logrus 或 zap)
- 日志级别：DEBUG, INFO, WARN, ERROR
- 关键操作必须记录日志
- 日志要包含请求 ID 用于链路追踪

### 9. 配置管理
- 使用 viper 进行配置管理
- 支持多环境配置 (dev, test, prod)
- 敏感信息使用环境变量
- 提供配置文件模板和说明

### 10. 依赖管理
- 使用 Go Modules 管理依赖
- 定期更新依赖版本
- 在 go.mod 中添加依赖用途注释
- 避免使用过多的第三方库，优先使用标准库

## 教学重点

### 基础概念讲解
1. **并发编程**: goroutine 和 channel 的使用
2. **接口设计**: 如何设计合理的接口
3. **内存管理**: 指针、切片、映射的正确使用
4. **包管理**: 模块化设计和包的组织

### 实践项目
- 从简单的 HTTP 服务器开始
- 逐步添加数据库连接、中间件、认证等功能
- 每个阶段都要有完整的代码示例和详细说明

### 代码示例要求
- 每个概念都要有可运行的示例代码
- 示例要从最简单开始，逐步增加复杂度
- 提供"这样做"和"不要这样做"的对比示例

## 文档要求
- README.md 必须包含项目介绍、安装步骤、运行方法
- 每个重要模块都要有单独的文档说明
- API 文档要使用 Swagger 生成
- 提供学习路径和进阶建议

## 代码审查检查点
1. 代码是否符合 Go 语言惯例？
2. 注释是否充分且准确？
3. 错误处理是否完整？
4. 测试覆盖率是否达标？
5. 是否有助于新手理解和学习？

## 性能考虑
- 在教学代码中适当讲解性能优化
- 但不要为了性能牺牲代码可读性
- 提供性能分析的基本方法 (pprof)

记住：这是一个教学项目，代码的教育价值比性能更重要。每一行代码都应该能让新手学到知识！